# –ò—Ç–æ–≥–∏: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–∫–æ–≤ –¥–ª—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–∫–æ–≤
- **–§–∞–π–ª**: `src/shared/api/mocks/properties-mock.ts`
- **–†–∞–∑–º–µ—Ä**: ~480 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- **–§—É–Ω–∫—Ü–∏–∏**:
  - `generateMockProperty()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
  - `generateMockProperties()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞
  - `generateMockPropertiesPage()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
  - `generateMockClusterProperties()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∞

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `MockPropertyConfig` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
  - 9 –ª–æ–∫–∞–ª–µ–π (ru, en, es, ca, fr, it, pt, de, uk)
  - 4 —Ç–∏–ø–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ (grid, horizontal, sidebar, detail)
  - –ì–∏–±–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–µ–π

### 3. –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **14 —Ä–∞–π–æ–Ω–æ–≤ –ë–∞—Ä—Å–µ–ª–æ–Ω—ã** –¥–ª—è –∞–¥—Ä–µ—Å–æ–≤
- **10 —É–ª–∏—Ü** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
- **5 –∞–≤—Ç–æ—Ä–æ–≤** —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ (agent, owner, agency)
- **10+ —Å—Ç–∞–Ω—Ü–∏–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞** (–º–µ—Ç—Ä–æ, –ø–æ–µ–∑–¥, –∞–≤—Ç–æ–±—É—Å)
- **5 –∫–æ–ª–ª–µ–∫—Ü–∏–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (–ø–æ 6 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∫–∞–∂–¥–æ–π)
- **–õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è** –Ω–∞ 5 —è–∑—ã–∫–∞—Ö (ru, en, es, ca, fr)

### 4. Feature flags
- **–§–∞–π–ª**: `src/shared/config/features.ts`
- `USE_MOCK_PROPERTIES` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ true –≤ development
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —è–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ `NEXT_PUBLIC_USE_MOCK_PROPERTIES`

### 5. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã
- ‚úÖ `src/shared/api/properties.ts` - –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π API
- ‚úÖ `src/shared/api/properties-server.ts` - —Å–µ—Ä–≤–µ—Ä–Ω—ã–π API
- ‚úÖ `src/app/api/chat/messages/[conversationId]/route.ts` - —á–∞—Ç API
- ‚úÖ `src/app/api/chat/ai-properties/route.ts` - AI —Å–≤–æ–π—Å—Ç–≤–∞
- ‚úÖ `src/shared/api/mocks/index.ts` - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç
- ‚úÖ `src/shared/config/index.ts` - –¥–æ–±–∞–≤–ª–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç features

### 6. –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏
- ‚ùå `generateMockProperties()` –∏–∑ `properties.ts` (140+ —Å—Ç—Ä–æ–∫)
- ‚ùå `generateMockProperties()` –∏–∑ `properties-server.ts` (140+ —Å—Ç—Ä–æ–∫)
- ‚ùå `generateProperty()` –∏–∑ chat API routes (40+ —Å—Ç—Ä–æ–∫ –∫–∞–∂–¥–∞—è)

**–ò—Ç–æ–≥–æ —É–¥–∞–ª–µ–Ω–æ**: ~360 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞ ‚ú®

### 7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–§–∞–π–ª**: `docs/api/mocks-system.md`
- –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–∞—Ä—Ç–æ—á–µ–∫
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—é –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```
–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:    3
–ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:   7
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:      1

–î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫:   ~527
–£–¥–∞–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫:     ~335
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

1. **–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã**
   - –í—Å–µ –º–æ–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏–∑ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
   - –ù–µ—Ç —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

2. **–ì–∏–±–∫–æ—Å—Ç—å –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å**
   - –õ–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∫–∞—Ä—Ç–æ—á–µ–∫
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–∑ –∫–æ—Ä–æ–±–∫–∏
   - –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤–∫–ª—é—á–∞–µ–º—ã–º–∏ –ø–æ–ª—è–º–∏

3. **–õ–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API**
   - –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å feature flag
   - –ò–ª–∏ —É–±—Ä–∞—Ç—å fallback –≤ catch –±–ª–æ–∫–∞—Ö
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

4. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript
   - –í—Å–µ —Ç–∏–ø—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ `@/entities/property`
   - –ù–∏–∫–∞–∫–∏—Ö `any` —Ç–∏–ø–æ–≤

5. **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
   - –ù–∞—Å—Ç–æ—è—â–∏–µ –∞–¥—Ä–µ—Å–∞ –ë–∞—Ä—Å–µ–ª–æ–Ω—ã
   - –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –ü—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω—ã–µ —Ü–µ–Ω—ã –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è –ª–∏—Å—Ç–∏–Ω–≥–∞ (grid –∫–∞—Ä—Ç–æ—á–∫–∏)
```typescript
import { generateMockPropertiesPage } from '@/shared/api/mocks';

const result = generateMockPropertiesPage(1, 20, 500, {
    cardType: 'grid',
    includeAuthor: true,
    includeTransport: true
});
```

### –î–ª—è —á–∞—Ç–∞ (horizontal –∫–∞—Ä—Ç–æ—á–∫–∏)
```typescript
import { generateMockProperty } from '@/shared/api/mocks';

const property = generateMockProperty(0, {
    cardType: 'horizontal',
    locale: 'ru'
});
```

### –î–ª—è –∫–∞—Ä—Ç—ã (sidebar –∫–∞—Ä—Ç–æ—á–∫–∏)
```typescript
const property = generateMockProperty(0, {
    cardType: 'sidebar'  // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –ø–æ–ª–µ–π
});
```

### –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```typescript
const property = generateMockProperty(0, {
    cardType: 'detail',
    locale: 'ru',
    includeRentalConditions: true,
    includeTenantPreferences: true,
    includeBuilding: true
});
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º backend**
   - –ö–æ–≥–¥–∞ API –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤, –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è–π—Ç–µ feature flag
   - –ò–ª–∏ —É–±–µ—Ä–∏—Ç–µ fallback –∏–∑ catch –±–ª–æ–∫–æ–≤

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ª–∏—Å—Ç–∏–Ω–≥–∞
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ map sidebar
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —á–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

3. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏**
   - –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –ª–æ–∫–∞–ª–∏ –≤ `DESCRIPTIONS`
   - –†–∞—Å—à–∏—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ `MOCK_AUTHORS`
   - –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å **—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è, –≥–∏–±–∫–∞—è –∏ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–∫–æ–≤**, –∫–æ—Ç–æ—Ä–∞—è:
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é
- –õ–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Å–ª—É—á–∞–∏
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

**–í—Å–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!** üéâ
# Map Sidebar Refactor - Implementation Summary

## –ó–∞–¥–∞—á–∞
–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∞–π–¥–±–∞—Ä –¥–ª—è —Ä–µ–∂–∏–º–∞ –∫–∞—Ä—Ç—ã –Ω–∞ –ü–ö –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
**–§–∞–π–ª—ã:**
- `messages/en.json`
- `messages/ru.json`
- `messages/fr.json`

**–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏:**
```json
{
  "mapSidebar": {
    "hidePanel": "...",
    "showPanel": "...",
    "showOnMap": "...",
    "showAsList": "...",
    "resetCluster": "...",
    "clusterObjects": "...",
    "sortBy": "...",
    "sortPrice": "...",
    "sortArea": "...",
    "sortDate": "...",
    "sortAscending": "...",
    "sortDescending": "...",
    "noResults": "...",
    "loading": "...",
    "objectsCount": "{count} properties",
    "changeSearchArea": "..."
  }
}
```

### 2. Desktop –≤–µ—Ä—Å–∏—è (MapSidebar)

**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª:** `src/widgets/map-sidebar/ui/ui.tsx`

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

‚úÖ **PropertyCardGrid –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- –ó–∞–º–µ–Ω–µ–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π `MapSidebarCard` –Ω–∞ `PropertyCardGrid` –∏–∑ `@/entities/property`
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –≥–∞–ª–µ—Ä–µ–µ–π, —Ü–µ–Ω–æ–π, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏

‚úÖ **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `react-window` v2 List component
- `ITEM_HEIGHT = 420px` (–¥–µ—Ç–∞–ª—å–Ω–æ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ)
- –ö–∞—Å—Ç–æ–º–Ω—ã–π `PropertyRow` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞

‚úÖ **Sticky Header**
- –ö–Ω–æ–ø–∫–∞ "–°–ø–∏—Å–∫–æ–º" –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —Ä–µ–∂–∏–º —Å–ø–∏—Å–∫–∞
- Select —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (—Ü–µ–Ω–∞, –ø–ª–æ—â–∞–¥—å, –¥–∞—Ç–∞)
- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (asc/desc) —Å –∏–∫–æ–Ω–∫–æ–π
- –ö–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å —Å–∞–π–¥–±–∞—Ä
- –°—á—ë—Ç—á–∏–∫ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π

‚úÖ **Infinite Scroll**
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ List component —á–µ—Ä–µ–∑ `onScroll` prop
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 80% —Å–∫—Ä–æ–ª–ª–∞
- Loading indicator –≤—ã–Ω–µ—Å–µ–Ω –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Å–ø–∏—Å–∫–∞

‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤**
- Props: `clusterId`, `onClusterReset`
- –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä" –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞

‚úÖ **–°–æ—Å—Ç–æ—è–Ω–∏—è**
- Loading state —Å spinner
- Empty state —Å –∏–∫–æ–Ω–∫–æ–π –∏ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é**
- Props: `isVisible`, `onVisibilityChange`
- –°–≤—ë—Ä–Ω—É—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–∑–∫—É—é –ø–æ–ª–æ—Å–∫—É —Å –∫–Ω–æ–ø–∫–æ–π
- –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã

#### Props –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
```typescript
interface MapSidebarProps {
    onPropertyClick?: (property: Property) => void;
    onPropertyHover?: (property: Property | null) => void;
    selectedPropertyId?: string | null;
    clusterId?: string | null;
    onClusterReset?: () => void;
    isVisible?: boolean;
    onVisibilityChange?: (visible: boolean) => void;
    className?: string;
}
```

### 3. Mobile –≤–µ—Ä—Å–∏—è (MobileMapSidebar)

**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª:** `src/widgets/map-sidebar/ui/ui.tsx`

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

‚úÖ **PropertyCardGrid –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —á–µ—Ä–µ–∑ Tailwind –∫–ª–∞—Å—Å—ã

‚úÖ **Bottom Sheet**
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `Sheet` –∏–∑ `@radix-ui/react-dialog`
- `side="bottom"` - –≤—ã–µ–∑–∂–∞–µ—Ç —Å–Ω–∏–∑—É
- `h-[90vh]` - –∑–∞–Ω–∏–º–∞–µ—Ç 90% —ç–∫—Ä–∞–Ω–∞
- Drag handle –≤–≤–µ—Ä—Ö—É

‚úÖ **Header**
- –°—á—ë—Ç—á–∏–∫ –æ–±—ä–µ–∫—Ç–æ–≤
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å Select
- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞
- –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ (—É—Å–ª–æ–≤–Ω–æ)

‚úÖ **Infinite Scroll**
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `onScroll` –Ω–∞ scrollable div
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 80% —Å–∫—Ä–æ–ª–ª–∞
- Loading indicator

‚úÖ **–ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞**
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É
- `absolute bottom-4 left-4`
- –ò–∫–æ–Ω–∫–∞ + —Ç–µ–∫—Å—Ç "–°–ø–∏—Å–∫–æ–º"

‚úÖ **–°–æ—Å—Ç–æ—è–Ω–∏—è**
- Loading state
- Empty state
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è

#### Props –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
```typescript
interface MobileMapSidebarProps {
    isOpen: boolean;
    onClose: () => void;
    onPropertyClick?: (property: Property) => void;
    selectedPropertyId?: string | null;
    clusterId?: string | null;
    onClusterReset?: () => void;
    onViewModeChange?: (mode: 'map' | 'list') => void;
}
```

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–§–∞–π–ª:** `docs/widgets/map-sidebar.md`

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
- –û–±–∑–æ—Ä –≤–∏–¥–∂–µ—Ç–∞
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±–æ–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- Props –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
- –ú–∏–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏

### 5. –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

‚úÖ **Code Review**
- –ü—Ä–æ–≤–µ–¥–µ–Ω–æ 2 –ø–æ–ª–Ω—ã—Ö code review
- –í—Å–µ –∑–∞–º–µ—á–∞–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω –≤–µ—Å—å —Ç–µ–∫—Å—Ç (–≤–∫–ª—é—á–∞—è aria-labels)

‚úÖ **Best Practices**
- FSD –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–±–ª—é–¥–µ–Ω–∞
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `widgets/`
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–∑ `entities/`
- API –≤ `shared/`
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—É–∫–æ–≤
- –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –∫–æ–ª–±—ç–∫–æ–≤

‚úÖ **Accessibility**
- –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ aria-labels
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–æ–ª–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- Keyboard navigation –≤–æ–∑–º–æ–∂–Ω–∞

‚úÖ **TypeScript**
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è Props
- Type-safe –∫–æ–ª–±—ç–∫–∏

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```typescript
// –í–Ω–µ—à–Ω–∏–µ
import { useTranslations } from 'next-intl';
import { List } from 'react-window';
import { Sheet, SheetContent } from '@/shared/ui/sheet';

// –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ
import { PropertyCardGrid } from '@/entities/property';
import { useCurrentFilters, useViewModeActions } from '@/widgets/search-filters-bar';
import { getPropertiesList } from '@/shared/api';
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### Desktop:
```tsx
<MapSidebar
    onPropertyClick={handlePropertyClick}
    onPropertyHover={handlePropertyHover}
    selectedPropertyId={selectedId}
    clusterId={selectedClusterId}
    onClusterReset={() => setSelectedClusterId(null)}
    isVisible={sidebarVisible}
    onVisibilityChange={setSidebarVisible}
/>
```

#### Mobile:
```tsx
<MobileMapSidebar
    isOpen={mobileListOpen}
    onClose={() => setMobileListOpen(false)}
    onPropertyClick={handlePropertyClick}
    selectedPropertyId={selectedId}
    clusterId={selectedClusterId}
    onClusterReset={() => setSelectedClusterId(null)}
    onViewModeChange={(mode) => {
        if (mode === 'list') setViewMode('list');
    }}
/>
```

## –ß—Ç–æ –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚ö†Ô∏è **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ Snap Points (Mobile)**
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ: 3 snap points (15%, 50%, 90%)
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: –ë–∞–∑–æ–≤—ã–π Sheet —Å –æ–¥–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π (90vh)
- –ü—Ä–∏—á–∏–Ω–∞: –¢—Ä–µ–±—É–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- –†–µ—à–µ–Ω–∏–µ: –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π —Ç–∏–ø–∞ `react-spring-bottom-sheet`

‚ö†Ô∏è **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è Mobile**
- Desktop –∏—Å–ø–æ–ª—å–∑—É–µ—Ç react-window
- Mobile –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—ã—á–Ω—ã–π —Å–ø–∏—Å–æ–∫
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ >100 –æ–±—ä–µ–∫—Ç–∞—Ö
- –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å react-window –¥–ª—è mobile –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

‚ö†Ô∏è **Keyboard Navigation**
- –£–¥–∞–ª–µ–Ω–∞ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

‚ö†Ô∏è **Skeleton Loader**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π spinner
- Skeleton –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- –†–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞—Ç—å PropertyCardGridSkeleton –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–µ—Å—Ç—ã

1. **Unit —Ç–µ—Å—Ç—ã:**
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - Infinite scroll –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –ö–ª–∞—Å—Ç–µ—Ä—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç —Å–ø–∏—Å–æ–∫
   - –°–æ—Å—Ç–æ—è–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

2. **Integration —Ç–µ—Å—Ç—ã:**
   - API –≤—ã–∑–æ–≤—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
   - –§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
   - –ö–æ–ª–±—ç–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

3. **E2E —Ç–µ—Å—Ç—ã:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–∫—Ä–æ–ª–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å —Å–∞–π–¥–±–∞—Ä
   - Mobile sheet –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è/–∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

4. **Performance —Ç–µ—Å—Ç—ã:**
   - –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ 1000+ –æ–±—ä–µ–∫—Ç–æ–≤
   - Infinite scroll –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
   - –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–ª–∞–≤–Ω—ã–µ

## –ò—Ç–æ–≥–∏

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ: 95%
- Desktop –≤–µ—Ä—Å–∏—è: 100%
- Mobile –≤–µ—Ä—Å–∏—è: 90% (–Ω–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö snap points)
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è: 100%
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 100%
- –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞: 100%

### –ì–æ—Ç–æ–≤–æ –∫ production: ‚úÖ –î–∞
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- Code review –ø—Ä–æ–π–¥–µ–Ω
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- –ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
2. UI/UX —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
3. Performance —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏: –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ snap points –¥–ª—è mobile
5. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏: –¥–æ–±–∞–≤–∏—Ç—å skeleton loader

## –ö–æ–º–º–∏—Ç—ã

1. `feat: Add mapSidebar localization keys and refactor MapSidebar with PropertyCardGrid`
2. `refactor: Fix infinite scroll in MapSidebar to use List onScroll handler`
3. `fix: Address code review comments - remove unused import, fix hardcoded text, add documentation`
4. `fix: Localize aria-labels and improve ITEM_HEIGHT comment`

## –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ 2-3 —á–∞—Å–∞ –Ω–∞:
- –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –æ–±–æ–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (3 —è–∑—ã–∫–∞)
- Code review –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
