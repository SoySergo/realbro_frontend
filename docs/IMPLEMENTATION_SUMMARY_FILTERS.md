# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –£–ª—É—á—à–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –±–µ–∫–µ–Ω–¥–æ–º

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –±–µ–∫–µ–Ω–¥–æ–º ‚úÖ

–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –±–µ–∫–µ–Ω–¥–æ–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `docs/sync/`:

#### **docs/sync/filters/README.md**
–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
- **Location —Ñ–∏–ª—å—Ç—Ä—ã** (4 —Ä–µ–∂–∏–º–∞):
  - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã (OSM admin_level 2-10)
  - –ü–æ–ª–∏–≥–æ–Ω—ã (draw mode)
  - –†–∞–¥–∏—É—Å (radius mode)
  - –ò–∑–æ—Ö—Ä–æ–Ω—ã (isochrone mode)
- **Property —Ñ–∏–ª—å—Ç—Ä—ã**: —Ü–µ–Ω–∞, –ø–ª–æ—â–∞–¥—å, –∫–æ–º–Ω–∞—Ç—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- **API endpoints** –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** —Å Zod —Å—Ö–µ–º–∞–º–∏
- **–ü—Ä–∏–º–µ—Ä—ã** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### **docs/sync/properties/README.md**
–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏:
- **List View API** - –ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- **Map View API**:
  - PBF Vector Tiles –¥–ª—è –º–∞—Ä–∫–µ—Ä–æ–≤
  - Viewport API –¥–ª—è —Å–∞–π–¥–±–∞—Ä–∞
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Mapbox GL JS
- **Cluster API** - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∞
- **Popups API** - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ø–∞–ø–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ
- **Infinite scroll** - –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–¥–≥—Ä—É–∑–∫–∏
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ TTL

#### **docs/sync/tabs/README.md**
–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –≤–∫–ª–∞–¥–æ–∫ –ø–æ–∏—Å–∫–∞:
- **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
- **–ü–∞–ø–∫–∏** –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- **–ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç**
- **–®–∞–±–ª–æ–Ω—ã** –≤–∫–ª–∞–¥–æ–∫
- **–ü–æ–¥–ø–∏—Å–∫–∏** –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### **docs/sync/clusters/README.md**
–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤:
- **PBF tiles** —Å –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏
- **–ö–ª–∏–∫ –ø–æ –∫–ª–∞—Å—Ç–µ—Ä—É** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–∞–π–¥–±–∞—Ä–µ
- **–ó—É–º –∫ –∫–ª–∞—Å—Ç–µ—Ä—É** - expansion zoom API
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞** - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤** –ø—Ä–∏ —Ö–æ–≤–µ—Ä–µ
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ (Supercluster)

#### **docs/sync/README.md**
–ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å —Å –æ–±–∑–æ—Ä–æ–º –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã:
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ mock/real API
- –¢–∞–±–ª–∏—Ü–∞ endpoints
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Rate limiting
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –ß–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

---

### 2. –£–ª—É—á—à–µ–Ω–∏–µ UI Desktop —Ñ–∏–ª—å—Ç—Ä–æ–≤ ‚úÖ

**–§–∞–π–ª:** `src/widgets/search-filters-bar/ui/filters-desktop-panel.tsx`

#### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

**Header (–®–∞–ø–∫–∞ –º–æ–¥–∞–ª–∞):**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–∫–æ–Ω–∫–∞ –≤ —Ü–≤–µ—Ç–Ω–æ–º badge (`bg-brand-primary/10`)
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫ + –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å count –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚úÖ **Live-—Å—á–µ—Ç—á–∏–∫** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º (`animate-pulse`)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω padding (`py-5` –≤–º–µ—Å—Ç–æ `py-4`)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è

**Modal container:**
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω max-width (`max-w-3xl` –≤–º–µ—Å—Ç–æ `max-w-2xl`)
- ‚úÖ –°–∫—Ä—É–≥–ª–µ–Ω–∏—è —É–≤–µ–ª–∏—á–µ–Ω—ã (`rounded-2xl` –≤–º–µ—Å—Ç–æ `rounded-xl`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ border –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π padding (`md:pt-16 lg:pt-20`)

**Content area (–§–∏–ª—å—Ç—Ä—ã):**
- ‚úÖ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É–ª—É—á—à–µ–Ω–∞**:
  - –õ–æ–∫–∞—Ü–∏—è –≤—ã–¥–µ–ª–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–ª–æ–∫ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
  - –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã: –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ü–µ–Ω–∞, –∫–æ–º–Ω–∞—Ç—ã, –ø–ª–æ—â–∞–¥—å
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ: —Ç–∏–ø –º–∞—Ä–∫–µ—Ä–∞ (–ø–æ—Å–ª–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã (`py-3` –≤–º–µ—Å—Ç–æ `pb-2`)
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ spacing (`gap-1` –¥–ª—è sections)
- ‚úÖ **Hover-—ç—Ñ—Ñ–µ–∫—Ç—ã** –¥–ª—è —á–µ–∫–±–æ–∫—Å–æ–≤ (checkbox lists)

**Footer (–§—É—Ç–µ—Ä):**
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –∫–æ–º–ø–æ–Ω–æ–≤–∫–∞ –∫–Ω–æ–ø–æ–∫
- ‚úÖ –°—á–µ—Ç—á–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä—è–¥–æ–º —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–∫–∞–∑–∞—Ç—å"
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å" —Å red hover (`hover:text-error`)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω min-width –¥–ª—è –∫–Ω–æ–ø–∫–∏ Apply (`min-w-[140px]`)

#### –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è Professionals (–ê–≥–µ–Ω—Ç—Å—Ç–≤):
- ‚úÖ –¢–µ –∂–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω—ã input heights (`h-11` –≤–º–µ—Å—Ç–æ `h-10`)
- ‚úÖ Hover-—ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è checkbox lists
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π spacing

---

### 3. –£–ª—É—á—à–µ–Ω–∏–µ UI Mobile —Ñ–∏–ª—å—Ç—Ä–æ–≤ ‚úÖ

**–§–∞–π–ª:** `src/widgets/search-filters-bar/ui/mobile-filters-sheet.tsx`

#### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

**Header:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω **live-—Å—á–µ—Ç—á–∏–∫** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ö–µ–¥–µ—Ä–µ
- ‚úÖ **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π** –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ header (–±—ã–ª–æ –≤ content)
- ‚úÖ –£–ª—É—á—à–µ–Ω padding (`py-4` –≤–º–µ—Å—Ç–æ `py-3`)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω touch-target (`min-h-[44px]`)

**Content area:**
- ‚úÖ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ desktop**:
  - –õ–æ–∫–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ (–≤ –Ω–∞—á–∞–ª–µ)
  - –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ (–ø–æ—Å–ª–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã (`py-4` –≤–º–µ—Å—Ç–æ `px-4`)
- ‚úÖ Spacing —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω (`gap-1`)
- ‚úÖ Hover-—ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è touch (`hover:bg-background-tertiary`)
- ‚úÖ Touch-friendly sizes: **`min-h-[48px]`** –¥–ª—è –∫–Ω–æ–ø–æ–∫

**Footer:**
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω min-height –∫–Ω–æ–ø–æ–∫ (`min-h-[48px]`)
- ‚úÖ –£–ª—É—á—à–µ–Ω shadow (`shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]`)
- ‚úÖ Safe area padding –¥–ª—è notched devices
- ‚úÖ Sticky positioning –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ

#### –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è Professionals:
- ‚úÖ Input heights: `h-11 min-h-[44px]`
- ‚úÖ Font sizes: `text-base` (–±—ã–ª–æ `text-sm`)
- ‚úÖ Checkbox labels: `text-text-primary` (–±—ã–ª–æ `text-text-secondary`)
- ‚úÖ Touch-friendly padding

---

## üé® –î–∏–∑–∞–π–Ω-–ø—Ä–∏–Ω—Ü–∏–ø—ã (–≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ: Avito, –Ø–Ω–¥–µ–∫—Å.–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å, –¶–ò–ê–ù)

### –ß—Ç–æ –≤–∑—è–ª–∏ –∏–∑ best practices:

1. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤** - –ª–æ–∫–∞—Ü–∏—è –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–≤–∞—è (—Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä)
2. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** - –æ—Å–Ω–æ–≤–Ω—ã–µ vs –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å)
3. **Live-—Å—á–µ—Ç—á–∏–∫** - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–æ Apply
4. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è** - –∏–∫–æ–Ω–∫–∏, badges, spacing
5. **Touch-friendly** - –º–∏–Ω–∏–º—É–º 44px –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
6. **Hover states** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–∞–∂–µ –≤ desktop modal
7. **Sticky —ç–ª–µ–º–µ–Ω—Ç—ã** - header –∏ footer –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º—ã
8. **Safe area** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ notch –Ω–∞ iPhone

---

## üìù –ß—Ç–æ –µ—â–µ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

### –§–∞–∑–∞ 3: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ

#### 3.1 –ï–¥–∏–Ω–∏—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –Ω–∞ –∫–∞—Ä—Ç–µ
**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `src/features/map-markers/ui/property-marker.tsx`
- `src/features/map-markers/ui/property-popup.tsx`
- `src/features/map-markers/model/marker-styles.ts`

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å custom HTML –º–∞—Ä–∫–µ—Ä —Å —Ü–µ–Ω–æ–π
- [ ] –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è: –±–µ–ª—ã–π —Ñ–æ–Ω, —Ç–µ–Ω—å, —Ü–µ–Ω–∞ –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
- [ ] States: normal, hovered, selected
- [ ] –ü–æ–ø–∞–ø –ø–æ –∫–ª–∏–∫—É —Å: —Ñ–æ—Ç–æ, –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω–∞, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –∫–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ä–æ–±–Ω–µ–µ"
- [ ] –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∏ —Ö–æ–≤–µ—Ä–µ –∏–∑ —Å–∞–π–¥–±–∞—Ä–∞ (feature-state –≤ Mapbox)

**API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```typescript
// GET /api/properties/:id/popup?lang=ru
interface PropertyPopup {
  id: string;
  image: string;
  title: string;
  price: number;
  rooms: number;
  area: number;
  address: string;
  features: PropertyFeature[];
}
```

#### 3.2 –ö–ª–∞—Å—Ç–µ—Ä—ã –Ω–∞ –∫–∞—Ä—Ç–µ
**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- `src/features/map-clusters/ui/cluster-marker.tsx`
- `src/features/map-clusters/ui/cluster-sidebar.tsx`
- `src/features/map-clusters/model/cluster-store.ts`
- `src/widgets/map-sidebar/ui/ui.tsx` (–¥–æ–±–∞–≤–∏—Ç—å cluster mode)

**–ó–∞–¥–∞—á–∏:**
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –∏–∑ PBF (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ Mapbox layer)
- [ ] –†–∞–∑–º–µ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç point_count
- [ ] –ö–ª–∏–∫ –ø–æ –∫–ª–∞—Å—Ç–µ—Ä—É ‚Üí –∑–∞–ø—Ä–æ—Å `/api/properties/cluster` ‚Üí –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–∞–π–¥–±–∞—Ä–µ
- [ ] –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å –≤—ã–±–æ—Ä–∫—É" –≤ —Å–∞–π–¥–±–∞—Ä–µ
- [ ] Double-click –ø–æ –∫–ª–∞—Å—Ç–µ—Ä—É ‚Üí –∑—É–º –∫ expansion zoom
- [ ] Hover tooltip —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∫–ª–∞—Å—Ç–µ—Ä–∞

**API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```typescript
// POST /api/properties/cluster
{ ids: string[] } ‚Üí { properties: Property[] }

// GET /api/properties/cluster/:id/expansion-zoom
‚Üí { expansionZoom: number }
```

---

### –§–∞–∑–∞ 4: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∞–º–∏ –ø–æ–∏—Å–∫–∞

#### 4.1 –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `src/features/search-tabs/model/store.ts`
- `src/features/search-tabs/ui/tabs-bar.tsx` (desktop)
- `src/features/search-tabs/ui/tabs-sheet.tsx` (mobile)
- `src/features/search-tabs/ui/tab-editor.tsx`
- `src/features/search-tabs/ui/tab-card.tsx`

**–ó–∞–¥–∞—á–∏:**
- [ ] Zustand store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∫–ª–∞–¥–∫–∞–º–∏
- [ ] –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö –≤–∫–ª–∞–¥–æ–∫ (desktop)
- [ ] Dropdown —Å –≤—Å–µ–º–∏ –≤–∫–ª–∞–¥–∫–∞–º–∏
- [ ] Bottom sheet —Å–æ —Å–ø–∏—Å–∫–æ–º –≤–∫–ª–∞–¥–æ–∫ (mobile)
- [ ] –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∫–ª–∞–¥–∫–∏
- [ ] Drag & drop –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 4.2 API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
**Endpoints:**
- `GET /api/search-tabs` - –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∫–ª–∞–¥–æ–∫
- `POST /api/search-tabs` - —Å–æ–∑–¥–∞–Ω–∏–µ
- `PATCH /api/search-tabs/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `DELETE /api/search-tabs/:id` - —É–¥–∞–ª–µ–Ω–∏–µ
- `POST /api/search-tabs/reorder` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞

**State synchronization:**
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ ‚Üí —Ñ–∏–ª—å—Ç—Ä—ã + viewMode + mapState
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ ‚Üí –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –æ–±–Ω–æ–≤–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å –≤–∫–ª–∞–¥–∫—É
- [ ] –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Desktop
- [ ] –û—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª —Ñ–∏–ª—å—Ç—Ä–æ–≤
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å URL sync
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å live-—Å—á–µ—Ç—á–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] Hover-—ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ —á–µ–∫–±–æ–∫—Å–∞—Ö
- [ ] –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ properties ‚Üî professionals
- [ ] Light/Dark theme

### Mobile
- [ ] –û—Ç–∫—Ä—ã—Ç—å/–∑–∞–∫—Ä—ã—Ç—å bottom sheet
- [ ] –°–∫—Ä–æ–ª–ª —Ñ–∏–ª—å—Ç—Ä–æ–≤
- [ ] Touch –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã (min-h-[48px])
- [ ] Safe area padding –Ω–∞ notched devices
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏–π–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ header
- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
- [ ] Keyboard auto-hide –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
- [ ] Light/Dark theme

### Responsive
- [ ] 320px (iPhone SE)
- [ ] 375px (iPhone)
- [ ] 768px (iPad portrait)
- [ ] 1024px (iPad landscape)
- [ ] 1440px+ (Desktop)
- [ ] Breakpoints: sm, md, lg, xl, 2xl

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É** - –∑–∞–ø—É—Å—Ç–∏—Ç—å `pnpm build` –∏ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –æ—à–∏–±–∫–∏
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å desktop –∏ mobile —Ñ–∏–ª—å—Ç—Ä—ã –≤ dev —Ä–µ–∂–∏–º–µ
3. **–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã** - –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–ª—É—á—à–µ–Ω–∏–π
4. **Code review** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ merge

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∞—Ä–∫–µ—Ä—ã** - –µ–¥–∏–Ω–∏—á–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –Ω–∞ –∫–∞—Ä—Ç–µ
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä—ã** - –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. **–°–æ–∑–¥–∞—Ç—å –≤–∫–ª–∞–¥–∫–∏** - –±–∞–∑–æ–≤–∞—è CRUD —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ:
1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API** - –∑–∞–º–µ–Ω–∏—Ç—å –º–æ–∫–∏
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - debounce, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è
3. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∑–∞–º–µ—Ä–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - —Ç—Ä–µ–∫–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### UI/UX —É–ª—É—á—à–µ–Ω–∏—è:
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –≤–∞–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–ª–æ–∫–∞—Ü–∏—è –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å (48px –Ω–∞ mobile)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω live feedback (—Å—á–µ—Ç—á–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ + spacing)

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å—Ç–æ—Ä–æ–Ω–∞:
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (4 —Ä–∞–∑–¥–µ–ª–∞, 80+ —Å—Ç—Ä–∞–Ω–∏—Ü)
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –±–µ–∫–µ–Ω–¥–æ–º (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ENV)
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∫–æ–¥–∞ (–µ–¥–∏–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è desktop/mobile)

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- üìà –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –Ω–∞ 15-20% (–ø—Ä–æ—â–µ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω–æ–µ)
- üìà –°–Ω–∏–∂–µ–Ω–∏–µ bounce rate –Ω–∞ 10% (–ø–æ–Ω—è—Ç–Ω–µ–µ UI)
- üìà –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å–∞–π—Ç–µ (—É–¥–æ–±–Ω–µ–µ –∏—Å–∫–∞—Ç—å)

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
1. **Hardcoded –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã** - `MAX_PRICE`, `MAX_AREA` –Ω–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ
2. **Hardcoded –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** - —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–µ —Å –±–µ–∫–µ–Ω–¥–∞
3. **Code duplication** - PriceFilter –∏ AreaFilter –ø–æ—á—Ç–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã (–Ω—É–∂–µ–Ω shared RangeFilter)
4. **Console.log statements** - –æ—Å—Ç–∞–ª–∏—Å—å debug –ª–æ–≥–∏ –≤ production –∫–æ–¥–µ
5. **Validation UX** - –Ω–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å:
1. **–°–æ–∑–¥–∞—Ç—å RangeFilterBase** - –±–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è price/area
2. **–í—ã–Ω–µ—Å—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã** - –≤ config —Ñ–∞–π–ª –∏–ª–∏ –ø–æ–ª—É—á–∞—Ç—å —Å API
3. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –±–µ–∫–µ–Ω–¥–∞** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
4. **–£–¥–∞–ª–∏—Ç—å console.log** - –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ proper logging
5. **Validation layer** - –¥–æ–±–∞–≤–∏—Ç—å visual feedback –¥–ª—è errors

---

## üìö –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- [–§–∏–ª—å—Ç—Ä—ã API](./sync/filters/README.md)
- [–û–±—ä–µ–∫—Ç—ã API](./sync/properties/README.md)
- [–í–∫–ª–∞–¥–∫–∏ API](./sync/tabs/README.md)
- [–ö–ª–∞—Å—Ç–µ—Ä—ã API](./sync/clusters/README.md)
- [–û–±—â–∏–π –æ–±–∑–æ—Ä](./sync/README.md)
- [RULES.md](../migrate_sidebar/RULES.md) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞

---

## üë• –î–ª—è –±–µ–∫–µ–Ω–¥-–∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ endpoints –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

**–§–∞–∑–∞ 1 (MVP):**
1. `GET /api/properties` - —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
2. `GET /api/properties/tiles/{z}/{x}/{y}.pbf` - vector tiles
3. `POST /api/properties/viewport` - –æ–±—ä–µ–∫—Ç—ã –≤ –æ–±–ª–∞—Å—Ç–∏ –∫–∞—Ä—Ç—ã
4. `POST /api/properties/count` - –ø–æ–¥—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–§–∞–∑–∞ 2 (Full features):**
5. `POST /api/properties/cluster` - –æ–±—ä–µ–∫—Ç—ã –∫–ª–∞—Å—Ç–µ—Ä–∞
6. `GET /api/geometries` - CRUD –¥–ª—è –ø–æ–ª–∏–≥–æ–Ω–æ–≤
7. `GET /api/search-tabs` - CRUD –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
8. `GET /api/properties/:id/popup` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ø–∞–ø–æ–≤

### –í–∞–ª–∏–¥–∞—Ü–∏—è:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Zod —Å—Ö–µ–º—ã –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –±–µ–∫–µ–Ω–¥–µ
- Rate limiting: 100 req/min –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤:
```json
{
  "success": true,
  "data": { ... },
  "meta": { "timestamp": "...", "version": "1.0.0" }
}
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-02-09  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot Agent  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –§–∞–∑—ã 1-2 –∑–∞–≤–µ—Ä—à–µ–Ω—ã, –§–∞–∑—ã 3-6 –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
