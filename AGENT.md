# AGENT.md - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è AI –∞–≥–µ–Ω—Ç–æ–≤

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –Ø–∑—ã–∫–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ**: –†—É—Å—Å–∫–∏–π —è–∑—ã–∫
- **–û–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ**: –†—É—Å—Å–∫–∏–π —è–∑—ã–∫
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ/console**: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
- **Git commits**: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (conventional commits)

### –ü–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
- pnpm

### –¢–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
‚ùå **–ù–ï –•–ê–†–î–ö–û–î–ò–¢–¨ –¢–ï–ö–°–¢** - –≤–µ—Å—å UI —Ç–µ–∫—Å—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏:

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
<button>{t('search')}</button>
<h1>{t('propertyList')}</h1>
```

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞/—Ñ–∏—á–∏

1. **–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** - 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –º–∞–∫—Å–∏–º—É–º
2. **–ú–µ—Å—Ç–æ**: `docs/functionality/` —Å —É–¥–æ–±–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
3. **–û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å**: `docs/functionality/index.md`

#### –§–æ—Ä–º–∞—Ç –æ–ø–∏—Å–∞–Ω–∏—è
```markdown
# –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞/—Ñ–∏—á–∏

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ü—Ä–æ–ø—Å—ã: –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–ø—Å—ã –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –°—Ç–µ–π—Ç: –∫–∞–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç
- API: –∫–∞–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–§–∞–π–ª**: –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ docs/functionality

```
docs/functionality/
‚îú‚îÄ‚îÄ index.md              # –ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å —Å–æ —Å—Å—ã–ª–∫–∞–º–∏
‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îú‚îÄ‚îÄ map/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PropertyMap.md
‚îÇ   ‚îú‚îÄ‚îÄ search/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchBar.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FilterPanel.md
‚îÇ   ‚îî‚îÄ‚îÄ property/
‚îÇ       ‚îî‚îÄ‚îÄ PropertyCard.md
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ properties.md
‚îî‚îÄ‚îÄ stores/
    ‚îî‚îÄ‚îÄ filterStore.md
```

#### –ü—Ä–∏–º–µ—Ä index.md
```markdown
# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞—Ä—Ç—ã
- [PropertyMap](features/map/PropertyMap.md) - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏
- [MapControls](features/map/MapControls.md) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ–π

### –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã
- [SearchBar](features/search/SearchBar.md) - –°—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞
- [FilterPanel](features/search/FilterPanel.md) - –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤

### API
- [Properties API](api/properties.md) - –†–∞–±–æ—Ç–∞ —Å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å—é
```

## ÔøΩ –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞

### –í–ê–ñ–ù–û: –¶–≤–µ—Ç–∞ –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
<div className="bg-background text-text-primary border-border">
<button className="bg-brand-primary hover:bg-brand-primary-hover">

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Ö–∞—Ä–¥–∫–æ–¥ –∑–∞–ø—Ä–µ—â—ë–Ω
<div className="bg-white text-black">
<button className="bg-blue-500">
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–≤–µ—Ç–∞ Tailwind
- **–§–∏—Ä–º–µ–Ω–Ω—ã–µ**: `brand-primary`, `brand-primary-hover`, `brand-primary-light`
- **–§–æ–Ω—ã**: `background`, `background-secondary`, `background-tertiary`
- **–¢–µ–∫—Å—Ç**: `text-primary`, `text-secondary`, `text-tertiary`
- **–ì—Ä–∞–Ω–∏—Ü—ã**: `border`, `border-hover`
- **–°–æ—Å—Ç–æ—è–Ω–∏—è**: `success`, `warning`, `error`, `info`
- **–°–µ–º–∞–Ω—Ç–∏–∫–∞**: `price` (–¥–ª—è —Ü–µ–Ω)

### –®—Ä–∏—Ñ—Ç—ã
- **–û—Å–Ω–æ–≤–Ω–æ–π**: Inter (–∞–≤—Ç–æ–º–∞—Ç–æ–º —á–µ—Ä–µ–∑ body)
- **–ú–æ–Ω–æ** (—Ü–µ–Ω—ã, ID): `font-mono`

### –¢–µ–º—ã
- –°–≤–µ—Ç–ª–∞—è –∏ —Ç—ë–º–Ω–∞—è —Ç–µ–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í—Å–µ —Ü–≤–µ—Ç–∞ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è: `ThemeSwitcher` (–∏–∑ `next-themes`)

üìö **–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ**: `/docs/DESIGN_GUIDE.md`

---

## ÔøΩüèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### Server Components First
```typescript
// ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - Server Component
async function PropertyPage({ params }: Props) {
  const property = await fetchProperty(params.id);
  return <PropertyDetails property={property} />;
}

// ‚úÖ Client —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
'use client';
import { useState } from 'react';

function InteractiveMap() {
  const [viewport, setViewport] = useState(/*...*/);
  // ...
}
```

### –ù–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É
```typescript
// ‚úÖ –°–æ–∑–¥–∞–π –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é —É—Ç–∏–ª–∏—Ç—É
// lib/formatters.ts
export function formatPrice(price: number, currency = '‚Ç¨') {
  return new Intl.NumberFormat('ru-RU').format(price) + ' ' + currency;
}

// ‚ùå –ù–µ –∫–æ–ø–∏—Ä—É–π –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–¥ –≤ —Ä–∞–∑–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```

### –¢–∏–ø–∏–∑–∞—Ü–∏—è
```typescript
// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã –∏–∑ types/
import type { Property } from '@/types/property';
import type { FilterState } from '@/types/filter';

// ‚úÖ –°–æ–∑–¥–∞–≤–∞–π –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
// types/map.ts
export type MapViewport = {
  latitude: number;
  longitude: number;
  zoom: number;
};
```

### –ò–º–ø–æ—Ä—Ç—ã
```typescript
// ‚úÖ –ì—Ä—É–ø–ø–∏—Ä—É–π –∏ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–π
// 1. React/Next
import { FC, useState } from 'react';
import { useRouter } from 'next/navigation';

// 2. External libs
import { useStore } from 'zustand';
import { z } from 'zod';

// 3. Internal components
import { PropertyCard } from '@/components/features/property';
import { Button } from '@/components/ui/button';

// 4. Types
import type { Property } from '@/types/property';

// 5. Utils/Styles
import { cn } from '@/lib/utils';
```

## üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞

### –†–∞–±–æ—Ç–∞ —Å —Å—Ç–µ–π—Ç–æ–º
- **Zustand** - —Ç–æ–ª—å–∫–æ –¥–ª—è UI —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Ñ–∏–ª—å—Ç—Ä—ã, –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–∞–Ω–µ–ª–∏)
- **URL state** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ (`nuqs` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
- **Server Components** - –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞

### API Routes
```typescript
// app/api/properties/route.ts
// ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zod
const filtersSchema = z.object({
  minPrice: z.number().optional(),
  maxPrice: z.number().optional(),
  // ...
});

export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const filters = filtersSchema.parse(Object.fromEntries(searchParams));
  
  console.log('Fetching properties with filters', filters);
  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
  
  // ...
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```typescript
// ‚úÖ Props —Å —Ç–∏–ø–∞–º–∏ –∏ defaults
type PropertyCardProps = {
  property: Property;
  variant?: 'default' | 'compact';
  showMap?: boolean;
};

// ‚úÖ –ö—Ä–∞—Ç–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
export function PropertyCard({ 
  property, 
  variant = 'default',
  showMap = false 
}: PropertyCardProps) {
  // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  const formattedPrice = formatPrice(property.price);
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  const hasImages = property.images.length > 0;
  
  return (/* ... */);
}
```

## üìã Checklist –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

- [ ] –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ (–≤—Å–µ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª–∏)
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –ª–æ–≥–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `docs/functionality/`
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `docs/functionality/index.md` (–µ—Å–ª–∏ –Ω–æ–≤–∞—è —Ñ–∏—á–∞)
- [ ] –¢–∏–ø—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ `types/`
- [ ] –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏
- [ ] Server Component –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –Ω–æ–≤–æ–π —Ñ–∏—á–∏

1. **–°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** –≤ `src/components/features/[feature]/`
2. **–î–æ–±–∞–≤—å —Ç–∏–ø—ã** –≤ `src/types/` (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
3. **–°–æ–∑–¥–∞–π —Å—Ç–æ—Ä** –≤ `src/store/` (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å—Ç–µ–π—Ç)
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π** –≤ `docs/functionality/features/[feature]/`
5. **–û–±–Ω–æ–≤–∏ –∏–Ω–¥–µ–∫—Å** –≤ `docs/functionality/index.md`
6. **–î–æ–±–∞–≤—å –ª–æ–∫–∞–ª–∏** –¥–ª—è –≤—Å–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ UI

---

**–ü–æ–º–Ω–∏**: –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–¥ > –±—ã—Å—Ç—Ä—ã–π –∫–æ–¥. –°–ª–µ–¥—É–π –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –ø—Ä–æ–µ–∫—Ç–∞.


