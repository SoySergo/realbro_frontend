# AGENT.md - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è AI –∞–≥–µ–Ω—Ç–æ–≤

## üìö –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- **[UI Components Guide](/docs/UI_COMPONENTS_GUIDE.md)** - üé® –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **[Design Guide](/docs/DESIGN_GUIDE.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–µ
- **[Functionality Index](/docs/functionality/index.md)** - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### üó∫Ô∏è –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã —Å –ª–æ–∫–∞—Ü–∏–µ–π
- [LocationSearchMode](/docs/functionality/features/search/LocationSearchMode.md) - –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Mapbox Geocoding
- [LocationDrawMode](/docs/functionality/features/search/LocationDrawMode.md) - –†–∏—Å–æ–≤–∞–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏
- [LocationIsochroneMode](/docs/functionality/features/search/LocationIsochroneMode.md) - –ò–∑–æ—Ö—Ä–æ–Ω (–≤—Ä–µ–º—è –≤ –ø—É—Ç–∏)
- [LocationRadiusMode](/docs/functionality/features/search/LocationRadiusMode.md) - –†–∞–¥–∏—É—Å –æ—Ç —Ç–æ—á–∫–∏

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –Ø–∑—ã–∫–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ**: –†—É—Å—Å–∫–∏–π —è–∑—ã–∫
- **–û–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ**: –†—É—Å—Å–∫–∏–π —è–∑—ã–∫
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ/console**: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
- **Git commits**: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (conventional commits)

### –ü–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
- pnpm

### –¢–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
‚ùå **–ù–ï –•–ê–†–î–ö–û–î–ò–¢–¨ –¢–ï–ö–°–¢** - –≤–µ—Å—å UI —Ç–µ–∫—Å—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏:

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
<button>{t('search')}</button>
<h1>{t('propertyList')}</h1>
```

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞/—Ñ–∏—á–∏

1. **–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** - 2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –º–∞–∫—Å–∏–º—É–º
2. **–ú–µ—Å—Ç–æ**: `docs/functionality/` —Å —É–¥–æ–±–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
3. **–û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å**: `docs/functionality/index.md`

#### –§–æ—Ä–º–∞—Ç –æ–ø–∏—Å–∞–Ω–∏—è
```markdown
# –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞/—Ñ–∏—á–∏

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ü—Ä–æ–ø—Å—ã: –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–ø—Å—ã –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –°—Ç–µ–π—Ç: –∫–∞–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç
- API: –∫–∞–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–§–∞–π–ª**: –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ docs/functionality

```
docs/functionality/
‚îú‚îÄ‚îÄ index.md              # –ì–ª–∞–≤–Ω—ã–π –∏–Ω–¥–µ–∫—Å —Å–æ —Å—Å—ã–ª–∫–∞–º–∏
‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îú‚îÄ‚îÄ map/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PropertyMap.md
‚îÇ   ‚îú‚îÄ‚îÄ search/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchBar.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FilterPanel.md
‚îÇ   ‚îî‚îÄ‚îÄ property/
‚îÇ       ‚îî‚îÄ‚îÄ PropertyCard.md
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ properties.md
‚îî‚îÄ‚îÄ stores/
    ‚îî‚îÄ‚îÄ filterStore.md
```

#### –ü—Ä–∏–º–µ—Ä index.md
```markdown
# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞—Ä—Ç—ã
- [PropertyMap](features/map/PropertyMap.md) - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏
- [MapControls](features/map/MapControls.md) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ–π

### –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã
- [SearchBar](features/search/SearchBar.md) - –°—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞
- [FilterPanel](features/search/FilterPanel.md) - –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤

### API
- [Properties API](api/properties.md) - –†–∞–±–æ—Ç–∞ —Å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å—é
```

## ÔøΩ –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞

## üé® –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞

### –í–ê–ñ–ù–û: –¶–≤–µ—Ç–∞ –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
<div className="bg-background text-text-primary border-border">
<button className="bg-brand-primary hover:bg-brand-primary-hover">

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Ö–∞—Ä–¥–∫–æ–¥ –∑–∞–ø—Ä–µ—â—ë–Ω
<div className="bg-white text-black">
<button className="bg-blue-500">
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–≤–µ—Ç–∞ Tailwind
- **–§–∏—Ä–º–µ–Ω–Ω—ã–µ**: `brand-primary`, `brand-primary-hover`, `brand-primary-light`
- **–§–æ–Ω—ã**: `background`, `background-secondary`, `background-tertiary`
- **–¢–µ–∫—Å—Ç**: `text-primary`, `text-secondary`, `text-tertiary`
- **–ì—Ä–∞–Ω–∏—Ü—ã**: `border`, `border-hover`
- **–°–æ—Å—Ç–æ—è–Ω–∏—è**: `success`, `warning`, `error`, `info`
- **–°–µ–º–∞–Ω—Ç–∏–∫–∞**: `price` (–¥–ª—è —Ü–µ–Ω)

### –®—Ä–∏—Ñ—Ç—ã
- **–û—Å–Ω–æ–≤–Ω–æ–π**: Inter (–∞–≤—Ç–æ–º–∞—Ç–æ–º —á–µ—Ä–µ–∑ body)
- **–ú–æ–Ω–æ** (—Ü–µ–Ω—ã, ID): `font-mono`

### –¢–µ–º—ã
- –°–≤–µ—Ç–ª–∞—è –∏ —Ç—ë–º–Ω–∞—è —Ç–µ–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í—Å–µ —Ü–≤–µ—Ç–∞ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è: `ThemeSwitcher` (–∏–∑ `next-themes`)

üìö **–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞**: 
- `/docs/DESIGN_GUIDE.md` - –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `/docs/UI_COMPONENTS_GUIDE.md` - **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** - –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∫–Ω–æ–ø–æ–∫, –∏–Ω–ø—É—Ç–æ–≤, –ø–∞–Ω–µ–ª–µ–π

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–≤–µ—Ç–∞ Tailwind
- **–§–∏—Ä–º–µ–Ω–Ω—ã–µ**: `brand-primary`, `brand-primary-hover`, `brand-primary-light`
- **–§–æ–Ω—ã**: `background`, `background-secondary`, `background-tertiary`
- **–¢–µ–∫—Å—Ç**: `text-primary`, `text-secondary`, `text-tertiary`
- **–ì—Ä–∞–Ω–∏—Ü—ã**: `border`, `border-hover`
- **–°–æ—Å—Ç–æ—è–Ω–∏—è**: `success`, `warning`, `error`, `info`
- **–°–µ–º–∞–Ω—Ç–∏–∫–∞**: `price` (–¥–ª—è —Ü–µ–Ω)

### –®—Ä–∏—Ñ—Ç—ã
- **–û—Å–Ω–æ–≤–Ω–æ–π**: Inter (–∞–≤—Ç–æ–º–∞—Ç–æ–º —á–µ—Ä–µ–∑ body)
- **–ú–æ–Ω–æ** (—Ü–µ–Ω—ã, ID): `font-mono`

### –¢–µ–º—ã
- –°–≤–µ—Ç–ª–∞—è –∏ —Ç—ë–º–Ω–∞—è —Ç–µ–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –í—Å–µ —Ü–≤–µ—Ç–∞ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è: `ThemeSwitcher` (–∏–∑ `next-themes`)

üìö **–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ**: `/docs/DESIGN_GUIDE.md`

---

## ÔøΩüèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### Server Components First
```typescript
// ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - Server Component
async function PropertyPage({ params }: Props) {
  const property = await fetchProperty(params.id);
  return <PropertyDetails property={property} />;
}

// ‚úÖ Client —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
'use client';
import { useState } from 'react';

function InteractiveMap() {
  const [viewport, setViewport] = useState(/*...*/);
  // ...
}
```

### –ù–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É
```typescript
// ‚úÖ –°–æ–∑–¥–∞–π –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é —É—Ç–∏–ª–∏—Ç—É
// lib/formatters.ts
export function formatPrice(price: number, currency = '‚Ç¨') {
  return new Intl.NumberFormat('ru-RU').format(price) + ' ' + currency;
}

// ‚ùå –ù–µ –∫–æ–ø–∏—Ä—É–π –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–¥ –≤ —Ä–∞–∑–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```

### –¢–∏–ø–∏–∑–∞—Ü–∏—è
```typescript
// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã –∏–∑ types/
import type { Property } from '@/types/property';
import type { FilterState } from '@/types/filter';

// ‚úÖ –°–æ–∑–¥–∞–≤–∞–π –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
// types/map.ts
export type MapViewport = {
  latitude: number;
  longitude: number;
  zoom: number;
};
```

### –ò–º–ø–æ—Ä—Ç—ã
```typescript
// ‚úÖ –ì—Ä—É–ø–ø–∏—Ä—É–π –∏ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–π
// 1. React/Next
import { FC, useState } from 'react';
import { useRouter } from 'next/navigation';

// 2. External libs
import { useStore } from 'zustand';
import { z } from 'zod';

// 3. Internal components
import { PropertyCard } from '@/components/features/property';
import { Button } from '@/components/ui/button';

// 4. Types
import type { Property } from '@/types/property';

// 5. Utils/Styles
import { cn } from '@/lib/utils';
```

## üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞

### –†–∞–±–æ—Ç–∞ —Å —Å—Ç–µ–π—Ç–æ–º
- **Zustand** - —Ç–æ–ª—å–∫–æ –¥–ª—è UI —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Ñ–∏–ª—å—Ç—Ä—ã, –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–∞–Ω–µ–ª–∏)
- **URL state** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ (`nuqs` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
- **Server Components** - –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞

### API Routes
```typescript
// app/api/properties/route.ts
// ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zod
const filtersSchema = z.object({
  minPrice: z.number().optional(),
  maxPrice: z.number().optional(),
  // ...
});

export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const filters = filtersSchema.parse(Object.fromEntries(searchParams));
  
  console.log('Fetching properties with filters', filters);
  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
  
  // ...
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```typescript
// ‚úÖ Props —Å —Ç–∏–ø–∞–º–∏ –∏ defaults
type PropertyCardProps = {
  property: Property;
  variant?: 'default' | 'compact';
  showMap?: boolean;
};

// ‚úÖ –ö—Ä–∞—Ç–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
export function PropertyCard({ 
  property, 
  variant = 'default',
  showMap = false 
}: PropertyCardProps) {
  // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  const formattedPrice = formatPrice(property.price);
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  const hasImages = property.images.length > 0;
  
  return (/* ... */);
}
```

## üìã Checklist –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

- [ ] –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ (–≤—Å–µ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª–∏)
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –ª–æ–≥–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `docs/functionality/`
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `docs/functionality/index.md` (–µ—Å–ª–∏ –Ω–æ–≤–∞—è —Ñ–∏—á–∞)
- [ ] –¢–∏–ø—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ `types/`
- [ ] –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏
- [ ] Server Component –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- [ ] **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ UI**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ `/docs/UI_COMPONENTS_GUIDE.md`

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –Ω–æ–≤–æ–π —Ñ–∏—á–∏

1. **–°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** –≤ `src/components/features/[feature]/`
2. **–î–æ–±–∞–≤—å —Ç–∏–ø—ã** –≤ `src/types/` (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
3. **–°–æ–∑–¥–∞–π —Å—Ç–æ—Ä** –≤ `src/store/` (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å—Ç–µ–π—Ç)
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π** –≤ `docs/functionality/features/[feature]/`
5. **–û–±–Ω–æ–≤–∏ –∏–Ω–¥–µ–∫—Å** –≤ `docs/functionality/index.md`
6. **–î–æ–±–∞–≤—å –ª–æ–∫–∞–ª–∏** –¥–ª—è –≤—Å–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ UI

## üó∫Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Mapbox

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

#### Mapbox Geocoding API
**–§–∞–π–ª**: `src/services/mapbox-geocoding.ts`

–ü–æ–∏—Å–∫ –º–µ—Å—Ç (–≥–æ—Ä–æ–¥–∞, —Ä–∞–π–æ–Ω—ã, —Å—Ç—Ä–∞–Ω—ã):
```typescript
import { searchLocations } from '@/services/mapbox-geocoding';

const results = await searchLocations({
    query: 'Barcelona',
    language: 'en',
    limit: 10,
});
```

#### Mapbox Isochrone API
**–§–∞–π–ª**: `src/services/mapbox-isochrone.ts`

–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–∑–æ—Ö—Ä–æ–Ω–æ–≤ (–æ–±–ª–∞—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∑–∞ –≤—Ä–µ–º—è):
```typescript
import { getIsochrone, getProfileColor } from '@/services/mapbox-isochrone';

const polygon = await getIsochrone({
    coordinates: [2.1734, 41.3851], // [lng, lat]
    profile: 'walking',
    minutes: 15,
});

const color = getProfileColor('walking'); // #28A745
```

### –ü—Ä–æ—Ñ–∏–ª–∏ –∏–∑–æ—Ö—Ä–æ–Ω–æ–≤
- `walking` - –ü–µ—à–∫–æ–º (–∑–µ–ª—ë–Ω—ã–π #28A745)
- `cycling` - –í–µ–ª–æ—Å–∏–ø–µ–¥ (–∂—ë–ª—Ç—ã–π #FFC107)
- `driving` - –ú–∞—à–∏–Ω–∞ (—Å–∏–Ω–∏–π #198BFF)

### –†–µ–∂–∏–º—ã —Ñ–∏–ª—å—Ç—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏

–í—Å–µ —Ä–µ–∂–∏–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–¥–≤—É—Ö—Å–ª–æ–π–Ω—É—é —Å–∏—Å—Ç–µ–º—É**:
- **–õ–æ–∫–∞–ª—å–Ω—ã–π —Å–ª–æ–π** (localStorage): –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- **–ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ª–æ–π** (store): –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

#### 1. Search Mode (–ü–æ–∏—Å–∫)
- Mapbox Geocoding API –¥–ª—è –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ Wikidata ID —Å OSM –ø–æ–ª–∏–≥–æ–Ω–∞–º–∏
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä –ª–æ–∫–∞—Ü–∏–π
- –¢–µ–≥–∏ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º + popover –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ

#### 2. Draw Mode (–†–∏—Å–æ–≤–∞–Ω–∏–µ)
- –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–æ–ª–∏–≥–æ–Ω –Ω–∞ –∫–∞—Ä—Ç–µ
- –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è GeoJSON –ø–æ–ª–∏–≥–æ–Ω–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è –±–µ–∫–µ–Ω–¥–∞

#### 3. Isochrone Mode (–í—Ä–µ–º—è –≤ –ø—É—Ç–∏)
- Mapbox Isochrone API
- –ü—Ä–æ—Ñ–∏–ª–∏: walking/cycling/driving
- –í—Ä–µ–º—è: 5, 10, 15, 30, 45, 60 –º–∏–Ω—É—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç–æ—á–∫–∏
- –¶–≤–µ—Ç –ø–æ–ª–∏–≥–æ–Ω–∞ –ø–æ –ø—Ä–æ—Ñ–∏–ª—é

#### 4. Radius Mode (–†–∞–¥–∏—É—Å)
- –ö—Ä—É–≥ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ä–∞–¥–∏—É—Å–∞ –æ—Ç —Ç–æ—á–∫–∏
- –†–∞–¥–∏—É—Å—ã: 1, 3, 5, 10, 15, 20 –∫–º
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
- –†–∏—Å–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Turf.js –∏–ª–∏ –Ω–∞—Ç–∏–≤–Ω—ã–π Mapbox

### –û–±—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ä–µ–∂–∏–º–æ–≤

```typescript
// –ö–æ–ª–ª–±—ç–∫–∏ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫–∞—Ä—Ç–æ–π
type LocationModeProps = {
    // –î–ª—è Draw
    onActivateDrawing?: () => void;
    drawnPolygon?: DrawPolygon | null;
    
    // –î–ª—è Isochrone/Radius
    onSelectPoint?: () => void;
    selectedCoordinates?: [number, number] | null;
    onShowIsochrone?: (polygon: number[][][], color: string) => void;
    onShowRadius?: (center: [number, number], radiusKm: number) => void;
    
    // –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è
    onDeletePolygon?: (id: string) => void;
    onClearIsochrone?: () => void;
    onClearRadius?: () => void;
};
```

### LocationModeActions
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤:
- **–û—á–∏—Å—Ç–∏—Ç—å**: —É–¥–∞–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞
- **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**: –ø—Ä–∏–º–µ–Ω—è–µ—Ç –≤ store (—Å –∞–ª–µ—Ä—Ç–æ–º –µ—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –¥—Ä—É–≥–∏—Ö —Ä–µ–∂–∏–º–∞—Ö)
- **X (–í—ã—Ö–æ–¥)**: –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–∞–Ω–µ–ª—å (—Å –∞–ª–µ—Ä—Ç–æ–º –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

---

**–ü–æ–º–Ω–∏**: –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–¥ > –±—ã—Å—Ç—Ä—ã–π –∫–æ–¥. –°–ª–µ–¥—É–π –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –ø—Ä–æ–µ–∫—Ç–∞.


